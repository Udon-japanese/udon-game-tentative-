const StickStatus={xPosition:0,yPosition:0,x:0,y:0,cardinalDirection:"C"},JoyStick=function(t,e,i){let o=void 0===(e=e||{}).title?"joystick":e.title,n=void 0===e.width?0:e.width,a=void 0===e.height?0:e.height,s=void 0===e.internalFillColor?"#00AA00":e.internalFillColor,c=void 0===e.internalLineWidth?2:e.internalLineWidth,d=void 0===e.internalStrokeColor?"#003300":e.internalStrokeColor,r=void 0===e.externalLineWidth?2:e.externalLineWidth,h=void 0===e.externalStrokeColor?"#008000":e.externalStrokeColor,S=void 0===e.autoReturnToCenter||e.autoReturnToCenter;i=i||function(t){};const u=document.getElementById(t);u.style.touchAction="none";const l=document.createElement("canvas");l.id=o,0===n&&(n=u.clientWidth),0===a&&(a=u.clientHeight),l.width=n,l.height=a,u.appendChild(l);const f=l.getContext("2d");let k=!1;const g=2*Math.PI,x=(l.width-(l.width/2+10))/2,P=x+5,C=x+30,m=l.width/2,p=l.height/2,v=l.width/10,y=-1*v,w=l.height/10,L=-1*w;let F=m,E=p;function W(){f.beginPath(),f.arc(m,p,C,0,g,!1),f.lineWidth=r,f.strokeStyle=h,f.stroke()}function T(){f.beginPath(),F<P&&(F=P),F+P>l.width&&(F=l.width-P),E<P&&(E=P),E+P>l.height&&(E=l.height-P),f.arc(F,E,x,0,g,!1);const t=f.createRadialGradient(F+20,E-20,5,F,E,75);t.addColorStop(0,s);const i=e.anotherInternalFillColor;if(i)for(const[e,o]of Object.entries(i))t.addColorStop(e,o);t.addColorStop(1,d),f.fillStyle=t,f.fill(),f.lineWidth=c,f.strokeStyle=d,f.stroke()}function D(){let t="",e=F-m,i=E-p;return i>=L&&i<=w&&(t="C"),i<L&&(t="N"),i>w&&(t="S"),e<y&&("C"===t?t="W":t+="W"),e>v&&("C"===t?t="E":t+="E"),t}"ontouchstart"in document.documentElement?(l.addEventListener("touchstart",(function(){k=!0}),!1),document.addEventListener("touchmove",(function(t){k&&t.targetTouches[0].target===l&&(F=t.targetTouches[0].pageX,E=t.targetTouches[0].pageY,"BODY"===l.offsetParent.tagName.toUpperCase()?(F-=l.offsetLeft,E-=l.offsetTop):(F-=l.offsetParent.offsetLeft,E-=l.offsetParent.offsetTop),f.clearRect(0,0,l.width,l.height),W(),T(),StickStatus.xPosition=F,StickStatus.yPosition=E,StickStatus.x=((F-m)/P*100).toFixed(),StickStatus.y=((E-p)/P*100*-1).toFixed(),StickStatus.cardinalDirection=D(),i(StickStatus))}),!1),document.addEventListener("touchend",(function(){k=!1,S&&(F=m,E=p);f.clearRect(0,0,l.width,l.height),W(),T(),StickStatus.xPosition=F,StickStatus.yPosition=E,StickStatus.x=((F-m)/P*100).toFixed(),StickStatus.y=((E-p)/P*100*-1).toFixed(),StickStatus.cardinalDirection=D(),i(StickStatus)}),!1)):(l.addEventListener("mousedown",(function(){k=!0}),!1),document.addEventListener("mousemove",(function(t){k&&(F=t.pageX,E=t.pageY,"BODY"===l.offsetParent.tagName.toUpperCase()?(F-=l.offsetLeft,E-=l.offsetTop):(F-=l.offsetParent.offsetLeft,E-=l.offsetParent.offsetTop),f.clearRect(0,0,l.width,l.height),W(),T(),StickStatus.xPosition=F,StickStatus.yPosition=E,StickStatus.x=((F-m)/P*100).toFixed(),StickStatus.y=((E-p)/P*100*-1).toFixed(),StickStatus.cardinalDirection=D(),i(StickStatus))}),!1),document.addEventListener("mouseup",(function(){k=!1,S&&(F=m,E=p);f.clearRect(0,0,l.width,l.height),W(),T(),StickStatus.xPosition=F,StickStatus.yPosition=E,StickStatus.x=((F-m)/P*100).toFixed(),StickStatus.y=((E-p)/P*100*-1).toFixed(),StickStatus.cardinalDirection=D(),i(StickStatus)}),!1)),W(),T(),this.GetWidth=()=>l.width,this.GetHeight=()=>l.height,this.GetPosX=()=>F,this.GetPosY=()=>E,this.GetX=()=>((F-m)/P*100).toFixed(),this.GetY=()=>((E-p)/P*100*-1).toFixed(),this.GetDir=()=>D()};